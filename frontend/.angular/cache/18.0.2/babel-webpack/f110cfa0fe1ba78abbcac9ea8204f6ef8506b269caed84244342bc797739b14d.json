{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DashboardComponent = void 0;\nconst i0 = require(\"@angular/core\");\nconst i1 = require(\"../app.service\");\nconst i2 = require(\"@angular/router\");\nconst i3 = require(\"../alert/alert.service\");\nconst i4 = require(\"../auth.service\");\nconst i5 = require(\"@angular/common\");\nconst i6 = require(\"primeng/table\");\nconst i7 = require(\"primeng/api\");\nconst i8 = require(\"primeng/inputtext\");\nconst _c0 = [\"orgTable\"];\nfunction DashboardComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 8);\n    i0.ɵɵtext(2, \"Organization ID\");\n    i0.ɵɵelement(3, \"p-sortIcon\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\", 8);\n    i0.ɵɵtext(5, \"Organization Name\");\n    i0.ɵɵelement(6, \"p-sortIcon\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"th\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"tr\")(9, \"th\")(10, \"input\", 11);\n    i0.ɵɵlistener(\"input\", function DashboardComponent_ng_template_3_Template_input_input_10_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      i0.ɵɵnextContext();\n      const orgTable_r2 = i0.ɵɵreference(2);\n      return i0.ɵɵresetView(orgTable_r2.filter($event.target.value, \"id\", \"equals\"));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"th\")(12, \"input\", 12);\n    i0.ɵɵlistener(\"input\", function DashboardComponent_ng_template_3_Template_input_input_12_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      i0.ɵɵnextContext();\n      const orgTable_r2 = i0.ɵɵreference(2);\n      return i0.ɵɵresetView(orgTable_r2.filter($event.target.value, \"name\", \"startsWith\"));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(13, \"th\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_ng_template_4_button_6_i_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 19);\n  }\n}\nfunction DashboardComponent_ng_template_4_button_6_i_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 20);\n  }\n}\nfunction DashboardComponent_ng_template_4_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_template_4_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const org_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.navigateToOrganization(org_r4.id));\n    });\n    i0.ɵɵtemplate(1, DashboardComponent_ng_template_4_button_6_i_1_Template, 1, 0, \"i\", 17)(2, DashboardComponent_ng_template_4_button_6_i_2_Template, 1, 0, \"i\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const org_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Edit \", org_r4.name, \"\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isAdmin);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isAdmin);\n  }\n}\nfunction DashboardComponent_ng_template_4_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_template_4_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const org_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.navigateToAsset(org_r4.id));\n    });\n    i0.ɵɵelement(1, \"i\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const org_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate1(\"title\", \"View Assets of \", org_r4.name, \"\");\n  }\n}\nfunction DashboardComponent_ng_template_4_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_template_4_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const org_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.archiveOrganization(org_r4));\n    });\n    i0.ɵɵelement(1, \"i\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const org_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Archive \", org_r4.name, \"\");\n  }\n}\nfunction DashboardComponent_ng_template_4_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_ng_template_4_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const org_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.activateOrganization(org_r4));\n    });\n    i0.ɵɵelement(1, \"i\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const org_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate1(\"title\", \"Activate \", org_r4.name, \"\");\n  }\n}\nfunction DashboardComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtemplate(6, DashboardComponent_ng_template_4_button_6_Template, 3, 4, \"button\", 13)(7, DashboardComponent_ng_template_4_button_7_Template, 2, 2, \"button\", 14)(8, DashboardComponent_ng_template_4_button_8_Template, 2, 2, \"button\", 15)(9, DashboardComponent_ng_template_4_button_9_Template, 2, 2, \"button\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const org_r4 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isArchive);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isArchive);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.isArchive && ctx_r4.isAdmin);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.isArchive && ctx_r4.isAdmin);\n  }\n}\nfunction DashboardComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.navigateToCreate());\n    });\n    i0.ɵɵtext(1, \" Add Organization \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.getArchivedOrganizations());\n    });\n    i0.ɵɵtext(1, \" View Archive \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DashboardComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function DashboardComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.getOrganizations());\n    });\n    i0.ɵɵtext(1, \" View Active \");\n    i0.ɵɵelementEnd();\n  }\n}\nlet DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    constructor(appService, activatedRoute, router, alertService, authService) {\n      this.appService = appService;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.alertService = alertService;\n      this.authService = authService;\n      this.orgAry = [];\n      this.assetAry = [];\n      this.isArchive = false;\n    }\n    ngOnInit() {\n      this.getOrganizations();\n    }\n    /**\n     * Function responsible for retreving all organizational data\n     */\n    getOrganizations() {\n      this.appService.getOrganizations().then(res => {\n        this.isArchive = false;\n        this.orgAry = res;\n        this.isAdmin = this.authService.isAdmin();\n      });\n    }\n    /**\n     * Function responsible for checking the status of an organization\n     * to determine if it is archived or not\n     */\n    getArchivedOrganizations() {\n      this.appService.getArchivedOrganizations().then(res => {\n        this.isArchive = true;\n        this.orgAry = res;\n      });\n    }\n    /**\n     * Function responsible for navigating to assests tied to an organization\n     * @param id is the ID of the organization tied to the assets\n     */\n    navigateToAsset(id) {\n      this.router.navigate([`organization/${id}`]);\n    }\n    /**\n     * Function responsible for navigating the user to the organization form to\n     * either create or update an organization\n     */\n    navigateToCreate() {\n      this.router.navigate([`organization-form`]);\n    }\n    /**\n     * Function responsible for loading the organization the end user selects\n     * @param id is the associated ID of the organization requested\n     */\n    navigateToOrganization(id) {\n      this.router.navigate([`organization-form/${id}`]);\n    }\n    /**\n     * Function responsible for archiving an organization by\n     * toggling the associated status\n     * @param org is the ID of the organization to alter\n     */\n    archiveOrganization(org) {\n      const confirmed = confirm(`Archive the organization \"${org.name}\"?`);\n      if (confirmed) {\n        this.appService.archiveOrganization(org.id).subscribe(res => {\n          this.getOrganizations();\n          this.alertService.success(res);\n        });\n      }\n    }\n    /**\n     * Function responsible for altering an organization status back\n     * to active\n     * @param org is the ID of the organization to alter\n     */\n    activateOrganization(org) {\n      const confirmed = confirm(`Activate the organization \"${org.name}\"?`);\n      if (confirmed) {\n        this.appService.activateOrganization(org.id).subscribe(res => {\n          this.getOrganizations();\n          this.alertService.success(res);\n        });\n      }\n    }\n    static #_ = this.ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.AppService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AlertService), i0.ɵɵdirectiveInject(i4.AuthService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      viewQuery: function DashboardComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n        }\n      },\n      decls: 9,\n      vars: 4,\n      consts: [[\"orgTable\", \"\"], [1, \"container-fluid\"], [3, \"value\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"type\", \"button\", \"class\", \"btn btn-primary float-right\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Add An Organization\", 3, \"click\", 4, \"ngIf\"], [\"style\", \"margin-right: 5px;\", \"type\", \"button\", \"class\", \"btn btn-info float-right\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"View Archived Organizations\", 3, \"click\", 4, \"ngIf\"], [\"style\", \"margin-right: 5px;\", \"type\", \"button\", \"class\", \"btn btn-info float-right\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"View Active Organizations\", 3, \"click\", 4, \"ngIf\"], [\"pSortableColumn\", \"id\"], [\"field\", \"id\"], [\"field\", \"name\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Search by ID\", 1, \"p-column-filter\", 3, \"input\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Search by Name\", 1, \"p-column-filter\", 3, \"input\"], [\"class\", \"btn btn-secondary\", \"style\", \"margin-right: 5px;\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-primary\", \"style\", \"margin-right: 5px;\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-warning\", \"style\", \"margin-right: 5px;\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 1, \"btn\", \"btn-secondary\", 2, \"margin-right\", \"5px\", 3, \"click\", \"title\"], [\"class\", \"pi pi-pencil\", 4, \"ngIf\"], [\"class\", \"pi pi-eye\", 4, \"ngIf\"], [1, \"pi\", \"pi-pencil\"], [1, \"pi\", \"pi-eye\"], [\"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 1, \"btn\", \"btn-primary\", 2, \"margin-right\", \"5px\", 3, \"click\", \"title\"], [1, \"pi\", \"pi-list\"], [\"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", 1, \"btn\", \"btn-warning\", 2, \"margin-right\", \"5px\", 3, \"click\", \"title\"], [1, \"pi\", \"pi-folder\"], [1, \"pi\", \"pi-folder-open\"], [\"type\", \"button\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"Add An Organization\", 1, \"btn\", \"btn-primary\", \"float-right\", 3, \"click\"], [\"type\", \"button\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"View Archived Organizations\", 1, \"btn\", \"btn-info\", \"float-right\", 2, \"margin-right\", \"5px\", 3, \"click\"], [\"type\", \"button\", \"data-toggle\", \"tooltip\", \"data-placement\", \"bottom\", \"title\", \"View Active Organizations\", 1, \"btn\", \"btn-info\", \"float-right\", 2, \"margin-right\", \"5px\", 3, \"click\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"p-table\", 2, 0);\n          i0.ɵɵtemplate(3, DashboardComponent_ng_template_3_Template, 14, 0, \"ng-template\", 3)(4, DashboardComponent_ng_template_4_Template, 10, 6, \"ng-template\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(5, \"br\");\n          i0.ɵɵtemplate(6, DashboardComponent_button_6_Template, 2, 0, \"button\", 5)(7, DashboardComponent_button_7_Template, 2, 0, \"button\", 6)(8, DashboardComponent_button_8_Template, 2, 0, \"button\", 7);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"value\", ctx.orgAry);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isArchive && ctx.isAdmin);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.isArchive);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isArchive);\n        }\n      },\n      dependencies: [i5.NgIf, i6.Table, i7.PrimeTemplate, i6.SortableColumn, i6.SortIcon, i8.InputText],\n      styles: [\".card-img-top[_ngcontent-%COMP%]{padding:20px}\"]\n    });\n  }\n  return DashboardComponent;\n})();\nexports.DashboardComponent = DashboardComponent;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}